<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ü–æ–¥–∞—Ä–æ–∫ :)</title>
<style>
body {
  margin: 0;
  background-color: black;
  color: white;
  font-family: "Segoe UI", sans-serif;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
}
button {
  background-color: #ff0055;
  border: none;
  border-radius: 12px;
  padding: 14px 30px;
  color: white;
  font-size: 20px;
  cursor: pointer;
  transition: 0.3s;
}
button:hover {
  background-color: #ff3377;
}
#lyrics {
  position: absolute;
  bottom: 60px;
  font-size: 26px;
  text-align: center;
  /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º z-index, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ */
  z-index: 999;
  opacity: 0;
  transition: opacity 0.4s ease-in-out;
  width: 90%;
}
.show {
  opacity: 1;
}
</style>
</head>
<body>

<button id="startBtn">–ù–∞–∂–º–∏ –ô–æ—É</button>

<audio id="music" src="2_5309797944113785629.m4a"></audio>

<div id="lyrics"></div>

<script>
const music = document.getElementById("music");
const startBtn = document.getElementById("startBtn");
const lyricsDiv = document.getElementById("lyrics");

// –¢–∞–π–º–∏–Ω–≥–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ —Å 125 —Å–µ–∫—É–Ω–¥
const lyrics = [
  { time: 130, text: "I was meant to love you" },
  { time: 135, text: "And always keep you in my life..." },
  { time: 141, text: "I was meant to love you" },
  { time: 146, text: "I knew I loved you at first sight..." }
];

let currentLine = -1;

startBtn.addEventListener("click", () => {
  startBtn.style.display = "none";
  
  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
  music.currentTime = 125;
  
  music.play()
    .then(() => {
        // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —Ü–∏–∫–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω
        requestAnimationFrame(updateLyrics);
    })
    .catch(() => {
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º currentTime = 0, –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å —Å 125
        music.currentTime = 0; 
        alert("–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –µ—â—ë —Ä–∞–∑, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫ üéß");
        startBtn.style.display = "block";
    });
});

function updateLyrics() {
  const currentTime = music.currentTime;
  
  for (let i = 0; i < lyrics.length; i++) {
    // –£—Å–ª–æ–≤–∏–µ: —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è >= —Ç–∞–π–º–∏–Ω–≥—É –ò —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –µ—â–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å
    if (currentTime >= lyrics[i].time && currentLine !== i) {
      currentLine = i;
      
      // –°–Ω–∞—á–∞–ª–∞ —É–±–∏—Ä–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç
      lyricsDiv.classList.remove("show");
      lyricsDiv.textContent = lyrics[i].text;
      
      // –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–´–ô –°–ë–†–û–°: –°–±—Ä–æ—Å –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ü–û–í–¢–û–†–ù–û–ì–û –ø–æ—è–≤–ª–µ–Ω–∏—è
      // –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã transition —Å—Ä–∞–±–æ—Ç–∞–ª –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏
      void lyricsDiv.offsetWidth; 
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç
      lyricsDiv.classList.add("show");
      
      break;
    } 
    // –≠–õ–ï–ú–ï–ù–¢–ê–†–ù–ê–Ø –õ–û–ì–ò–ö–ê –°–ö–†–´–¢–ò–Ø: –µ—Å–ª–∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–∫–∞–∑–∞–Ω–∞, 
    // –Ω–æ –≤—Ä–µ–º—è —É–∂–µ –ø–µ—Ä–µ–≤–∞–ª–∏–ª–æ –∑–∞ –µ–µ —Ç–∞–π–º–∏–Ω–≥, –∏ –º—ã –µ—â–µ –Ω–µ –¥–æ—à–ª–∏ –¥–æ —Å–ª–µ–¥—É—é—â–µ–π, 
    // —Å–∫—Ä—ã–≤–∞–µ–º –µ–µ.
    else if (currentLine === i && (i + 1 < lyrics.length) && currentTime >= lyrics[i + 1].time - 0.2) {
        lyricsDiv.classList.remove("show");
    }
  }
  
  if (!music.paused && !music.ended) {
      requestAnimationFrame(updateLyrics);
  }
}
</script>

</body>
</html>
